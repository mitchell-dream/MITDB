desc 'PodUpdate ç”¨æ¥å‡çº§ pod çš„ fastlane è„šæœ¬ï¼Œ
        å‚æ•°ï¼štagï¼šæ ‡ç­¾å·,
             specName: spec æ–‡ä»¶åç§°
        ç”¨æ³•ï¼šfastlane PodUpdate tag:xxx specName:xxx'
lane :PodUpdate do |options|
tagName = options[:tag]
specName = options[:specName]

#1 pod install
cocoapods(
  clean: true,
  podfile: "./Example/Podfile"
)

#2 git add
git_add(path: ".")
#3 git commit
git_commit(path: ".", message: "ç‰ˆæœ¬å‡çº§")

#4 git push 
push_to_git_remote


#5.éªŒè¯ tag æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ é™¤æœ¬åœ°æ ‡ç­¾å’Œè¿œç¨‹æ ‡ç­¾
if git_tag_exists(tag: tagName)
  UI.message("æ ‡ç­¾ #{tagName} å·²ç»å­˜åœ¨ï¼Œåˆ é™¤ ğŸš€")
  #åˆ é™¤æœ¬åœ°å’Œè¿œç¨‹æ ‡ç­¾
  git_tag_remove(tag:tagName)
end

#6 æ·»åŠ æ ‡ç­¾
add_git_tag(
tag: tagName
)
#7 æ·»åŠ åˆ°æœåŠ¡å™¨
push_git_tags

#8 é‡å†™ podspec æ–‡ä»¶
version_bump_podspec(path: "#{specName}.podspec", version_number: tagName)


#9 pod lib lint
pod_lib_lint(verbose: true, allow_warnings: true, use_libraries: true)

#10 pod trunk push å…±æœ‰
pod_push(path: "#{specName}.podspec", allow_warnings: true, use_libraries:true)
#ç§æœ‰
#pod_push(path: "#{specName}.podspec", repo: "MITDB", allow_warnings: true, use_libraries:true)


end
